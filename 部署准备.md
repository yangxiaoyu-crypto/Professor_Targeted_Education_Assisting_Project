# 教学智能助手 - 部署准备清单

## 📋 部署前准备工作

### 一、网络环境检查 ⚠️ 重要！

#### 1. 校园网连接
本项目需要访问山东大学内网服务器，请确保：

**方式一：在校园内**
- 连接到山东大学校园网WiFi
- 或使用校园网有线连接

**方式二：校外访问**
- 使用山东大学VPN
- VPN地址：（请咨询学校网络中心）
- 账号：您的学号/工号
- 密码：您的VPN密码

#### 2. 测试服务器连接

打开命令行（Windows按Win+R，输入cmd），执行以下命令：

```bash
# 测试API Gateway
ping 10.102.32.223

# 测试Embedding服务
ping 10.2.8.77
```

**预期结果**：
```
正在 Ping 10.102.32.223 具有 32 字节的数据:
来自 10.102.32.223 的回复: 字节=32 时间<1ms TTL=64
```

**如果ping不通**：
- ✅ 检查是否连接校园网/VPN
- ✅ 检查防火墙设置
- ✅ 联系网络管理员

#### 3. 测试API可用性

在浏览器中访问：
```
http://10.102.32.223:8080
http://10.102.32.223:8000/v1
```

如果能访问（即使显示错误页面），说明服务器可达。

---

### 二、本地环境准备

#### 1. 安装Node.js

**下载地址**：https://nodejs.org/

**推荐版本**：Node.js 16+ (LTS版本)

**检查安装**：
```bash
node -v    # 应显示 v16.x.x 或更高
npm -v     # 应显示 7.x.x 或更高
```

**Windows安装步骤**：
1. 下载安装包（.msi文件）
2. 双击安装
3. 一路Next，勾选"Add to PATH"
4. 重启命令行窗口
5. 运行 `node -v` 验证

**Mac安装**：
```bash
# 使用Homebrew
brew install node

# 或下载安装包
# https://nodejs.org/
```

**Linux安装**：
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install nodejs npm

# CentOS/RHEL
sudo yum install nodejs npm
```

#### 2. 安装代码编辑器（可选）

推荐使用 **Visual Studio Code**
- 下载：https://code.visualstudio.com/
- 功能强大，支持React开发
- 可安装插件：ESLint, Prettier, React等

---

### 三、项目文件准备

#### 1. 确认文件完整性

检查以下文件是否存在：

**核心文件**：
- [ ] package.json
- [ ] vite.config.js
- [ ] index.html
- [ ] src/main.jsx
- [ ] src/App.jsx
- [ ] src/services/api.js

**页面组件**（src/pages/）：
- [ ] HomePage.jsx
- [ ] SyllabusGenerator.jsx
- [ ] ParticipativeLearning.jsx
- [ ] LearningObjectives.jsx
- [ ] StudentAssessment.jsx
- [ ] IdeologicalEducation.jsx
- [ ] CourseComparison.jsx

**知识库**：
- [ ] 知识库（仅按格式分类）/pdf/
- [ ] 知识库（仅按格式分类）/doc+docx/

#### 2. 检查配置文件

打开 `src/config/env.js`，确认服务器地址正确：

```javascript
export const config = {
  API_GATEWAY_URL: "http://10.102.32.223:8080",
  VLLM_BASE_URL: "http://10.102.32.223:8000/v1",
  EMBEDDING_BASE_URL: "http://10.2.8.77:3000/v1/embeddings",
  // ...
};
```

---

### 四、安装项目依赖

#### 方式一：使用启动脚本（推荐）

**Windows**：
```bash
双击 start.bat
```

**Mac/Linux**：
```bash
chmod +x start.sh
./start.sh
```

启动脚本会自动：
1. 检查Node.js
2. 安装依赖
3. 启动开发服务器

#### 方式二：手动安装

```bash
# 1. 进入项目目录
cd D:\Users\53207\Desktop\public

# 2. 安装依赖（首次运行）
npm install

# 如果安装慢，可使用淘宝镜像：
npm install --registry=https://registry.npmmirror.com
```

**预期结果**：
- 创建 `node_modules` 目录
- 显示安装进度
- 最后显示 "added XXX packages"

**常见问题**：
- 如果报错，尝试：`npm cache clean --force`
- 如果网络慢，使用淘宝镜像
- 如果权限问题，以管理员身份运行

---

### 五、启动项目

```bash
# 开发模式启动
npm run dev
```

**预期输出**：
```
  VITE v5.0.8  ready in 500 ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.x.x:3000/
  ➜  press h to show help
```

**访问系统**：
浏览器打开：`http://localhost:3000`

---

### 六、功能测试

#### 测试清单

访问系统后，依次测试：

**1. 首页加载**
- [ ] 页面正常显示
- [ ] 导航菜单可用
- [ ] 样式正常

**2. 课程大纲生成**
- [ ] 进入"课程大纲生成"页面
- [ ] 填写表单信息
- [ ] 点击"生成课程大纲"
- [ ] 查看是否有内容流式输出
- [ ] 测试复制和下载功能

**3. 参与式学习**
- [ ] 进入"参与式学习"页面
- [ ] 点击任一教学方法卡片
- [ ] 填写课程信息
- [ ] 生成教学方案
- [ ] 查看生成结果

**4. 其他模块**
- [ ] 学习目标撰写
- [ ] 学生评估方案
- [ ] 课程思政设计
- [ ] 课程方案对比

#### 如果AI生成失败

**可能原因**：
1. 网络未连接到校园网/VPN
2. 服务器繁忙
3. API配置错误

**解决步骤**：
1. 检查网络连接（ping服务器）
2. 查看浏览器控制台错误（F12）
3. 检查 `src/config/env.js` 配置
4. 稍后重试

---

### 七、后端服务器相关（已部署，仅供参考）

根据项目提示词，后端已在服务器上部署：

**服务器信息**：
- IP: 10.102.32.223
- 用户: yxy
- 密码: Lib[61-MKNGdimRy

**已部署的服务**：
1. **API Gateway** (端口8080)
   - 统一API入口
   
2. **VLLM大模型服务** (端口8000)
   - DeepSeek等大语言模型
   - 用于生成教学内容
   
3. **Embedding服务** (端口3000，服务器10.2.8.77)
   - 文本向量化
   - 知识库检索

**环境变量（已配置在服务器）**：
```bash
# LLM相关
VLLM_API_KEY="empty"
VLLM_BASE_URL="http://10.102.32.223:8000/v1/"

# Embedding相关
EMBEDDING_URL="http://10.2.8.77:3000/v1/embeddings"
EMBEDDING_API_KEY="sk-cPbl4W5omBMZM0wADfFdEeCd5a7c4fD492D88dDb21Ac8e9e"
EMBEDDING_MODEL="embeddings"

# 其他服务（如需要）
MINIMAX_API_KEY="..." # TTS服务
```

**您不需要**：
- ❌ 自己搭建后端服务器
- ❌ 部署AI模型
- ❌ 配置数据库
- ❌ 设置中间件

**您只需要**：
- ✅ 确保能访问到服务器（校园网/VPN）
- ✅ 前端正确配置服务器地址
- ✅ 运行前端开发服务器

---

### 八、生产环境部署（可选）

如果需要部署到生产环境：

#### 1. 构建项目
```bash
npm run build
```

生成 `dist` 目录

#### 2. 部署到Web服务器

**方式一：使用Node.js serve**
```bash
npm install -g serve
serve -s dist -p 3000
```

**方式二：使用Nginx**

Nginx配置示例：
```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # 代理API请求到后端
    location /api {
        proxy_pass http://10.102.32.223:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

**方式三：部署到服务器**
```bash
# 1. 将dist目录上传到服务器
scp -r dist/* yxy@10.102.32.223:/path/to/web/

# 2. 配置Nginx或Apache指向dist目录
```

---

### 九、常见问题排查

#### 问题1：npm install 失败
**解决方案**：
```bash
# 清除缓存
npm cache clean --force

# 使用淘宝镜像
npm install --registry=https://registry.npmmirror.com

# 或使用yarn
npm install -g yarn
yarn install
```

#### 问题2：无法访问服务器
**解决方案**：
1. 确认连接校园网/VPN
2. ping服务器IP
3. 检查防火墙设置
4. 联系网络管理员

#### 问题3：页面空白
**解决方案**：
1. 打开浏览器控制台（F12）
2. 查看Console错误信息
3. 检查Network请求状态
4. 清除浏览器缓存

#### 问题4：AI生成失败
**解决方案**：
1. 检查网络连接
2. 查看控制台错误
3. 确认服务器地址配置正确
4. 稍后重试

#### 问题5：端口被占用
**解决方案**：
```bash
# Windows查找占用端口的进程
netstat -ano | findstr :3000

# 杀死进程（PID是上面查到的）
taskkill /PID <进程ID> /F

# 或修改端口（vite.config.js）
server: {
  port: 3001  // 改为其他端口
}
```

---

### 十、联系与支持

如果遇到无法解决的问题：

1. **查看文档**：
   - README.md
   - 使用说明.md
   - 本文档

2. **检查日志**：
   - 浏览器控制台（F12 → Console）
   - 终端错误信息

3. **联系团队**：
   - 提供详细的错误描述
   - 附带错误截图
   - 说明操作步骤

---

## ✅ 快速检查清单

部署前请确认：

- [ ] 已连接校园网/VPN
- [ ] 能ping通服务器（10.102.32.223）
- [ ] 已安装Node.js 16+
- [ ] 项目文件完整
- [ ] 已运行 `npm install`
- [ ] 配置文件正确
- [ ] 能访问 http://localhost:3000
- [ ] AI生成功能正常

---

**准备就绪后，运行 `start.bat` 或 `npm run dev` 即可开始使用！** 🚀

